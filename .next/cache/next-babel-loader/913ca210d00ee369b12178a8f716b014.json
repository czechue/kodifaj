{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar __jsx = React.createElement;\nimport React, { useContext, useState } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport { UserContext } from '../../../components/providers/user.provider';\nimport { HOSTNAME } from '../../../lib/hostname.config';\nimport LayoutComponent from '../../../components/shared/layout/layout.component';\nimport TaskDetailComponent from '../../../components/task-detail/task-detail.component';\nimport '../../../public/static/style.css'; // todo: string[] do naprawy typ, error handling\n\nasync function fetchTask(id) {\n  const res = await fetch(`${HOSTNAME}/api/tasks/${id}`);\n  const task = await res.json();\n  return {\n    task\n  };\n}\n\nconst TaskPage = ({\n  task\n}) => {\n  const {\n    user\n  } = useContext(UserContext);\n  const {\n    0: currentTask,\n    1: setCurrentTask\n  } = useState(task);\n\n  async function refresh() {\n    const refreshedProps = await fetchTask(task._id);\n    setCurrentTask(refreshedProps.task);\n  }\n\n  return __jsx(LayoutComponent, {\n    user: user\n  }, __jsx(TaskDetailComponent, _extends({\n    updateTaskData: refresh\n  }, currentTask)));\n};\n\nTaskPage.getInitialProps = async ({\n  query: {\n    id\n  }\n}) => {\n  return fetchTask(id);\n};\n\nexport default TaskPage;","map":null,"metadata":{},"sourceType":"module"}