{"version":3,"file":"static/webpack/static/development/pages/views/tasks/edit.js.77a2aa671c8bdca46b1b.hot-update.js","sources":["webpack:///./components/new-task/new-task.component.tsx"],"sourcesContent":["import React from 'react';\nimport { AxiosResponse } from 'axios';\nimport { Form, Field } from 'react-final-form';\nimport { FieldArray } from 'react-final-form-arrays';\nimport arrayMutators from 'final-form-arrays';\n\nimport FormWrapperComponent from '../shared/form-wrapper/form-wrapper.component';\nimport InputComponent from '../shared/input/input.component';\nimport mapFormToNewTaskFormat from './utils/map-form-to-new-task-form.util';\nimport NewTaskHeading from './heading/heading.component';\nimport FieldArrayComponent from './field-array/field-array.component';\nimport MarkdownEditorComponent from '../shared/markdown-editor/markdown-editor.component';\nimport { MarkdownViewComponent } from '../shared/markdown-view/markdown-view.component';\nimport { Task } from '../../lib/types/task';\nimport taskMapper from './utils/task-mapper.util';\n\n// const required = (value: string) => (value ? undefined : \"Required\");\n\nexport default function NewTaskComponent({ task, onSubmit }: NewTaskProps) {\n  // todo: investigate why values argument doesnt work with NewTaskForm type\n  async function onFormSubmit(values: any) {\n    if (onSubmit) {\n      onSubmit(mapFormToNewTaskFormat(values));\n    }\n  }\n\n  return (\n    <>\n      <NewTaskHeading>Kreator zadań</NewTaskHeading>\n      <FormWrapperComponent>\n        <Form\n          onSubmit={onFormSubmit}\n          mutators={{\n            ...arrayMutators,\n          }}\n          initialValues={task ? taskMapper(task) : {}}\n          render={({ handleSubmit, values }) => (\n            <form onSubmit={handleSubmit}>\n              <Field\n                name=\"title\"\n                label=\"Tytuł\"\n                component={InputComponent}\n                placeholder=\"np. Super cool formularz\"\n              />\n\n              <Field\n                name=\"repo\"\n                label=\"Link do zadania na Github\"\n                component={InputComponent}\n                placeholder=\"https://github.com/kodifaj\"\n              />\n\n              <Field\n                name=\"tags\"\n                label=\"Tagi\"\n                component={InputComponent}\n                placeholder=\"html, js, css\"\n              />\n\n              <FieldArray name=\"tips\">\n                {({ fields, meta }) => (\n                  <FieldArrayComponent\n                    fields={fields}\n                    meta={meta}\n                    recordName=\"tip\"\n                    label=\"Wskazówki\"\n                    placeholder=\"Nowa wskazówka\"\n                  />\n                )}\n              </FieldArray>\n\n              <FieldArray name=\"images\">\n                {({ fields, meta }) => (\n                  <FieldArrayComponent\n                    fields={fields}\n                    meta={meta}\n                    recordName=\"image\"\n                    label=\"Obrazy\"\n                    placeholder=\"Nowy obraz max 10kb\"\n                  />\n                )}\n              </FieldArray>\n\n              <Field\n                name=\"content\"\n                label=\"Treść\"\n                component={MarkdownEditorComponent}\n                placeholder=\"Na czym polega zadanie?\"\n              />\n\n              <span className=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\">Preview</span>\n              <div className=\"bg-white p-2 my-2 rounded\">\n                <MarkdownViewComponent source={values.content} />\n              </div>\n\n              <div className=\"mt-4 flex flex-row-reverse\">\n                <button\n                  className=\"bg-gradient-button text-white px-4 py-2 rounded tracking-wide\"\n                  type=\"submit\"\n                >\n                  zapisz zadanie\n                </button>\n              </div>\n            </form>\n          )}\n        />\n      </FormWrapperComponent>\n    </>\n  );\n}\n\ninterface NewTaskProps {\n  onSubmit: (task: NewTaskMapped) => Promise<AxiosResponse<NewTaskMapped>>;\n  task?: Task;\n}\n\nexport interface NewTaskForm {\n  content: string;\n  repo: string;\n  images: Image[];\n  tips: Tip[];\n  title: string;\n  tags: string;\n}\n\nexport interface NewTaskMapped {\n  content: string;\n  repo: string;\n  images: string[] | [];\n  tips: string[] | [];\n  title: string;\n  tags: string[] | [];\n}\n\ninterface Tip {\n  tip: string;\n}\n\ninterface Image {\n  image: string;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AAKA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAQA;AACA;AACA;AACA;AAJA;AAQA;AACA;AACA;AACA;AAJA;AAOA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AADA;AAWA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AADA;AAYA;AACA;AACA;AACA;AAJA;AAOA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AAEA;AACA;AAFA;AA5DA;AANA;AA+EA;;;;A","sourceRoot":""}